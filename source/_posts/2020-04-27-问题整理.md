---
title: 2020-04-27-面试整理
date: 2020-04-27 23:02:59
tags:
---

# 操作系统
1. 什么是进程
狭义定义：进程就是一段程序的执行过程。
广义定义：进程是一个具有一定独立功能的程序关于某个数据集合的一次运行活动。它是操作系统动态执行的基本单元，在传统的操作系统中，进程既是基本的分配单元，也是基本的执行单元。

2. 进程和线程的区别
是不同的操作系统资源管理方式，是概念，进程是具有一定独立功能的程序关于某个数据集合上的一次运行活动,进程是系统进行资源分配和调度的一个独立单位，线程是进程的一个实体,是CPU调度和分派的基本单位。

3. 程序启动都发生了什么
    1. 创建进程，加载虚拟内存空间
    2. 加载动态库、可执行文件
    3. 创建主线程、初始化。
    4. 启动主线程
    5. 调用 main 函数

4. 堆和栈的区别是什么
数据结构上讲是先进先出和后进后出的区别。操作系统来说的话是堆是程序员负责分配管理，栈是由系统来管理。

5. 如何解决死锁

    1. 银行家算法，计算单位时间内可分配的资源和所有线程&进程要获取的资源进行匹配，只运行匹配得上的线程&进程。
    2. 资源排序，对资源进行编号&排序，每个线程&进程都只能请求比上一次资源序号大的资源。
    3. 检测死锁，撤销低优先级线程&进程

6. 一个进程的地址和物理地址之间的关系是什么？
使用段表页表维护的，转换方式通过段表和页表确定内存页号，通过偏移量读取数据。

7. 进程间通信的方式
    1. 管道，
    2. 信号
    3. 临界区内存共享
    4. semaphore 信号量
    5. 套接字

8. 程序在运行时操作系统除了分配内存空间还有什么

    1. 执行对应内存的代码
    2. 按段页去内存中寻找代码
    3. 找不到的话从虚拟内存中加载
    4. 内存不足时将暂时不需要的资源写入硬盘。释放内存
    5. 调度线程


# 网络
1. HTTP消息的header都有哪些？

    Accept：接受的各种类型
    Authorization：认证信息
    Cache-Control：缓存方式
    Cookie：额外塞入的信息
    Date： 时间
    User-Agent：身份标识
    Expires： 过期时间
    ETag： 标识符
    Last-Modified：最后修改时间

2. Http 2.0 与 1.0 的区别
二进制传输，单次链接并发请求


3. 在浏览器中输入URL，发生的事情都有什么？
    
    0. ARP 找到路由 mac 地址
    1. DNS 地址解析 IP
    2. 包装数据包，数据帧。数据帧保存了机器&中转服务器 mac 地址。
    3. 建立连接
    4. 传输数据
    5. 断开连接

4. Ping是什么协议
Internet Control Message Protocol

5. TCP建立连接的过程，断开连接的过程，为什么是四次握手？
建立连接
    1.1 client 发送 SYN 请求申请建立连接，其中包含 seq
    1.2 server 发起 SYN 请求申请建立连接，包含 ack 和 seq
    1.3 client 发送网络请求响应 server 建林连接成功，包含ack
断开连接
    1.1 client 发送 FIN 申请关闭连接。表示没有数据发送，但是可以接受
    1.2 server 发送确认包，表示当前知道了 client 关闭连接的请求，但还没准备好释放连接。
    1.3 server 发送 FIN 申请关闭连接，
    1.4 server 发送确认包，关闭连接
    client 等待一段时间（防止 1.4发送失败）关闭连接

6. 数字证书怎么验证？
通过自带的根证书来验证。（不太确定）

7. HTTPS和HTTP的区别是什么？
增加了安全性，TLS数据加密解密

8. SSL建立连接的过程是什么，说一下？
    1.1 client 发送建立连接请求，携带支持加密的算法，随机数
    1.2 server 返回使用的加密方式，随机数、服务器证书
    1.3 client 验证 server 返回的证书，用 server 公钥加密一个随机数，发送给 server，同时用三个随机岁做对称加密 key，告知支持的对称加密算法（双向验证还会发送 client 证书）
    1.5 server 接到三个随机数生成 对称加密 key，告知 client 使用额对称加密算法，后续数据加密都用对称加密

9. TCP和UDP的区别是什么？
可靠和非可靠


10. P2P传输是什么？我发送数据只有你的IP，并没有你的主机号，是怎么讲数据发送到你主机？
 peer-to-peer,静态地址转换和端口转换。

# IOS
1. 你平时怎么解决网络请求的依赖关系：当一个接口的请求需要依赖于另一个网络请求的结果。
RAC或者NSOpreation。

2. NSThread，GCD，NSOperation相关的。开启一条线程的方法？线程可以取消吗？
在调用 start 的时候创建一条线程。
NSThread，NSOperation 调用 cancle 只是修改了标识。没有任何事情。

3. 如何cancel一个GCD的任务
定义标识来标记GCD是否取消。

4. 你认为自动布局怎么实现的
多个方程式按照约束条件计算出上左下右宽高。

5. autoreleasepool的使用场景
短时间内创建了大量的临时对象

6. assign可以用于OC对象吗
可以，但是不建议，生成的 set 函数中没有对对象强引用。

7. copy和strong的区别
set 函数调用了 retain 和 copy 的区别。

8. dispatch_once的原理
生成一个全局信号量，判断信号量是否使用过。

9. NSObject结构体里面有什么，大小为什么是16字节
只有一个 isa 指针吧，runtime 设置了最小地址分配。

10. 自旋锁和互斥锁的区别
忙等和释放资源等待唤醒的区别

11. 一个OC对象的内存布局
只有一个 isa 指针啊。类对象的话会有成员变量和函数名函数地址

12. weak如何实现自动赋nil
对象被释放的时候通过全局弱引用表根据被释放对象的地址找到弱引用对象，批量释放。

13. isEquel 和 hash 的关系
建议重写 isEquel 要重写 hash。数组字典等数据结构存储对象是需要 hash 来做优化。

14. Pod update 和 pod install 的区别
重新计算依赖，升级 pod 库。
根据 .lock 文件指定版本直接引用。

15. 哈希冲突怎么解决
不同功能不同解决方式，查找函数时 hash 冲突，导致地址函数非目标函数，则寻找相高地址。

16. 可变数组的实现原理
分配一个默认的大小，放不下了乘以一个系数创建一个新数组。通过 ofset 来做头部索引。

17. 单个viewController的生命周期？

    1. load 
    2. initialize
    3. viewdidload
    4. viewwillappear
    5. viewdidappear
    6. viewwilldisappear
    7. viewdiddisappear
    8. dealloc

18. 如何检测应用是否卡顿
CADispalyLink、监听 runloop 的状态改变

19. 所有OC对象都继承与 NSObject 吗，id是什么
NSObject 是一个支持了 NSObject 协议的类。并不是所有对象一定要继承于 NSObject，

20. layoutIfNeeded 和 setNeedsLayout 的区别
看文档是立即更新和设置标识，在下一次UI更新中携带更新

21. ARC和MRC的本质区别是什么？
编译期增加 retain 和 release。运行时添加 retain 和 release。

22. 子线程里面，需要加autoreleasepool吗。那子线程中的autorelease变量什么时候释放？

    1. 看你是否开启了 runloop
    2. 没有 runloop 也会懒加载出一个。pop 时机为线程结束后。

23. 图片怎么显示的，以及图片缓冲区。UI的渲染步骤，视图打包流程，cpu和gpu工作，为什么要双帧缓冲区。

    * 分配内存缓冲区和其它资源。
    * 从磁盘拷贝数据到内核缓冲区
    * 从内核缓冲区复制数据到用户空间
    * 生成UIImageView，把图像数据赋值给UIImageView
    * 将压缩的图片数据，解码为位图数据（bitmap），如果数据没有字节对齐，Core Animation会再拷贝一份数据，进行字节对齐。
    * CATransaction 捕获到 UIImageView layer 树的变化，主线程 Runloop 提交CATransaction，开始进行图像渲染。
    * 坐标转换
    * 将坐标交给顶点着色器(顶点计算)
    * 形状装配
    * 几何着色
    * 将图片光栅化(获取图片对应屏幕上的像素点)
    * 片元着色器计算(计算每个像素点的最终显示的颜色值)
    * 写入帧缓存，等待垂直同步信号。
    * 从帧缓存区中渲染到屏幕上

单缓冲区会有依赖，读写需要 one by one 的进行，效率不高，双缓冲区可以在视频控制器读取数据时，提前在另一个缓冲区布局新数据。

24. SDWebImage的清除缓存策略
LRU

25. iOS 图片设置圆角性能问题 
有些效果被认为不能直接呈现于屏幕，而需要在别的地方做额外的处理预合成。图层属性的混合体没有预合成之前不能直接在屏幕中绘制，所以就需要屏幕外渲染。

26. bitmap 的结构
二维数组？保存了RGBA？

27. iOS中数据持久化方案有哪些？
sqlite、coredata、archive

28. cocoa 和 cocoa touch是什么?/cocoa touch底层技术架构?
用于开发 mac os 和 iOS 应用程序。

29. iOS 的 timer 和 CADisplay 的区别。

    runloop 会周期性判断是否可以触发 timer。错过了就等下一个周期。

    CADisplay 是在触发了 v-sync 信号时才会触发的回调，如果在一个 VSync 时间内，帧缓冲区没有完成内容提交，则那一帧就会被丢弃，等待下一次机会再显示，而这时显示屏会保留之前的内容不变。这就是界面卡顿的原因。同时也不会去调用 CADisplay。

30. 如何hook一个对象的方法，而不影响其它对象
动态创建子类，交换函数实现。

31. 队列&线程&同步和异步任务派发
线程是 CPU 调度的最小单位，队列是决定任务将要在哪个线程执行的控制逻辑。
串行队列：等待上一个任务结束后调度下一个任务
并行队列：无需等待上一个任务结束后调度下一个任务
同步任务：不会开启新线程
异步任务：会开启新线程


32. 编程中的六大设计原则？
单一职责 开闭 接口隔离 。。。

33. 说一下 JS 和 OC 互相调用的几种方式？
注入对象、webview 修改request、



# 加密解密
1. 对称加密和非对称加密的区别？

# 算法
1. TOP K
2. LRU、LFU
3. 单链表反转链表需要几个指针，怎么找到链表的环，那怎么求得链表环的长度？无编码，说思路。链表中环开始的地方，原理说出来
4. 不用第三者，怎么交换两个数
6. 用来判断一颗二叉树是不是对称的
7. 算法字符串翻转
8. 两个链表找第一个相同结点
9. 找链表的倒数第k个结点
10. 二叉树的中序遍历，非递归